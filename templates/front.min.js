/*! anticonferences - v1.0.0 - 2017-09-09 5:22:08 PM UTC - https://github.com/wordcampparis/anticonferences */
!function(a){var b=a("#support-container");a("#ac-new-topic").on("click",function(b){b.preventDefault(),a("#camp-modal-holder").length||(a("body").append(a("<div></div>").prop("id","camp-modal-holder")),a("#camp-modal-holder").append(a("<div></div>").addClass("camp-backdrop")),a("#respond-container").addClass("camp-modal"))}),a("#commentform").on("reset",function(b){b.preventDefault(),a("#camp-modal-holder").length&&a("#camp-modal-holder").remove(),a("#respond-container").removeClass("camp-modal")}),a(".comment-list").on("click",".ac-support-button",function(c){c.preventDefault();var d=a(c.currentTarget).data("topic-id"),e=a(c.currentTarget).clone().removeClass("ac-support-button").addClass("ac-heart").removeAttr("data-topic-id");if(d){if("undefined"==typeof AntiConferences.votes||0===parseInt(AntiConferences.votes,10))return void a(c.currentTarget).parent().append(a("<p></p>").addClass("missing-option").html("Please contact the administrator to make him define the amount of available votes."));a(c.currentTarget).parent().append(b.addClass("active")),a(b).find("#ac-topic-id").val(d);for(var f="",g=0;g<AntiConferences.votes;g++)e.attr("data-amount",g+1),e.find(".ac-loved").removeClass("ac-loved").addClass("ac-love"),f+=e.get(0).outerHTML;a(b).find(".ac-hearts").length||a(b).find("div.submit").before(a("<div></div>").addClass("ac-hearts").html(f))}}),window.selectHearts=function(b){b.preventDefault();var c=a(b.currentTarget);c.addClass("selected"),a.each(c.siblings(),function(b,d){a(d).data("amount")<=c.data("amount")?a(d).addClass("selected"):a(d).removeClass("selected")})},a(".comment-list").on("mouseenter",".ac-heart",function(a){return window.selectHearts(a)}),a(".comment-list").on("click",".ac-heart",function(a){return window.selectHearts(a)}),a(".comment-list").on("submit",".support-form",function(b){var c=a(b.currentTarget).find(".ac-heart.selected").last().data("amount");return c?(a("#ac-support-amount").val(c),a("#ac-support-author").val()||a("#ac-support-author").val(a("#support-email").val().split("@")[0]),b):void b.preventDefault()}),a(".comment-list").on("reset",".support-form",function(c){return a.each(a(c.currentTarget).find(".ac-heart.selected"),function(b,c){a(c).removeClass("selected")}),a("#ac-support-amount").val(""),a(c.delegateTarget).append(b.removeClass("active")),c}),a("#ac-order-box").on("change",function(b){var c=a(b.currentTarget).val(),d="DESC",e=c.split("_");e.length&&-1!==a.inArray(e[e.length-1],["asc","desc"])&&(d=e[e.length-1].toUpperCase()),a("#ac-order-order").val(d)})}(jQuery);